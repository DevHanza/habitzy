import{c as me,r as d,m as R,j as a,a as I,u as Gr,b as ce,d as Yr,e as St,f as Ie,g as De,h as He,i as Xr,k as Qr,n as Oe,l as Me,o as Jr,p as Zr,q as _r,s as Et,t as At,P as Tt,v as en,w as tn,x as Rt,B as rn,G as nn,E as on,y as ge,z as an,A as Ne,C as $e,H as sn,W as ue,S as z,D as oe,F as It,T as Le,I as ln,J as cn,K as un,L as J,M as dn,_ as Dt,N as fn,O as pn,Q as ae,R as Ht,U as Ot,V as Mt,X as Nt,Y as gn,Z as hn,$ as mn,a0 as vn,a1 as Ke,a2 as $t,a3 as yn,a4 as bn,a5 as xn,a6 as jn,a7 as wn,a8 as ie,a9 as kn,aa as Pn,ab as Lt,ac as Ft,ad as Cn,ae as Sn,af as En,ag as An,ah as Ue,ai as Ge,aj as Tn,ak as Rn,al as In}from"./index-JM6Jp4b1.js";const[Vt,ve]=me({name:"CheckboxContext",hookName:"useCheckboxContext",providerName:"<CheckboxProvider />"}),zt=d.forwardRef((e,t)=>{const r=ve(),n=R(r.getControlProps(),e);return a.jsx(I.div,{...n,ref:t})});zt.displayName="CheckboxControl";function Dn(e){const{value:t,onChange:r,defaultValue:n}=e,[o,i]=d.useState(n),s=t!==void 0,c=s?t:o,l=d.useCallback(u=>(s||i(u),r?.(u)),[s,r]);return[c,l]}function Hn(e={}){const{defaultValue:t,value:r,onValueChange:n,disabled:o,readOnly:i,name:s,invalid:c}=e,l=!(o||i),u=Gr(n,{sync:!0}),[g,p]=Dn({value:r,defaultValue:t||[],onChange:u}),m=v=>g.some(w=>String(w)===String(v)),h=v=>{m(v)?y(v):f(v)},f=v=>{l&&(m(v)||p(g.concat(v)))},y=v=>{l&&p(g.filter(w=>String(w)!==String(v)))};return{isChecked:m,value:g,name:s,disabled:!!o,readOnly:!!i,invalid:!!c,setValue:p,addValue:f,toggleValue:h,getItemProps:v=>({checked:v.value!=null?m(v.value):void 0,onCheckedChange(){v.value!=null&&h(v.value)},name:s,disabled:o,readOnly:i,invalid:c})}}const[On,Mn]=me({name:"CheckboxGroupContext",hookName:"useCheckboxGroupContext",providerName:"<CheckboxGroupProvider />",strict:!1}),Wt=d.forwardRef((e,t)=>{const[r,n]=ce()(e,["defaultValue","value","onValueChange","disabled","invalid","readOnly","name"]),o=Hn(r);return a.jsx(On,{value:o,children:a.jsx(I.div,{ref:t,role:"group",...n,...Yr.build().group.attrs})})});Wt.displayName="CheckboxGroup";const Bt=d.forwardRef((e,t)=>{const r=ve(),n=R(r.getHiddenInputProps(),e),o=St();return a.jsx(I.input,{"aria-describedby":o?.ariaDescribedby,...n,ref:t})});Bt.displayName="CheckboxHiddenInput";const qt=d.forwardRef((e,t)=>{const r=ve(),n=R(r.getLabelProps(),e);return a.jsx(I.span,{...n,ref:t})});qt.displayName="CheckboxLabel";const Nn=(e={})=>{const t=Mn(),r=St(),n=d.useMemo(()=>R(e,t?.getItemProps({value:e.value})??{}),[e,t]),o=d.useId(),{getRootNode:i}=Ie(),{dir:s}=De(),c={id:o,ids:{label:r?.ids.label,hiddenInput:r?.ids.control},dir:s,disabled:r?.disabled,readOnly:r?.readOnly,invalid:r?.invalid,required:r?.required,getRootNode:i,...n},l=He(Xr,c);return Qr(l,Oe)},Kt=d.forwardRef((e,t)=>{const[r,n]=ce()(e,["checked","defaultChecked","disabled","form","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]),o=Nn(r),i=R(o.getRootProps(),n);return a.jsx(Vt,{value:o,children:a.jsx(I.label,{...i,ref:t})})});Kt.displayName="CheckboxRoot";const Ut=d.forwardRef((e,t)=>{const[{value:r},n]=ce()(e,["value"]),o=R(r.getRootProps(),n);return a.jsx(Vt,{value:r,children:a.jsx(I.label,{...o,ref:t})})});Ut.displayName="CheckboxRootProvider";const[Gt,U]=me({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),Yt=d.forwardRef((e,t)=>{const r=U(),n=R(r.getAnchorProps(),e);return a.jsx(I.div,{...n,ref:t})});Yt.displayName="PopoverAnchor";const Xt=d.forwardRef((e,t)=>{const r=U(),n=R(r.getArrowProps(),e);return a.jsx(I.div,{...n,ref:t})});Xt.displayName="PopoverArrow";const Qt=d.forwardRef((e,t)=>{const r=U(),n=R(r.getArrowTipProps(),e);return a.jsx(I.div,{...n,ref:t})});Qt.displayName="PopoverArrowTip";const Jt=d.forwardRef((e,t)=>{const r=U(),n=R(r.getCloseTriggerProps(),e);return a.jsx(I.button,{...n,ref:t})});Jt.displayName="PopoverCloseTrigger";const Zt=d.forwardRef((e,t)=>{const r=U(),n=Me(),o=R(r.getContentProps(),n.getPresenceProps(),e);return n.unmounted?null:a.jsx(I.div,{...o,ref:Jr(n.ref,t)})});Zt.displayName="PopoverContent";const _t=d.forwardRef((e,t)=>{const r=U(),n=R(r.getDescriptionProps(),e);return a.jsx(I.div,{...n,ref:t})});_t.displayName="PopoverDescription";const er=d.forwardRef((e,t)=>{const r=U(),n=R(r.getIndicatorProps(),e);return a.jsx(I.div,{...n,ref:t})});er.displayName="PopoverIndicator";const tr=d.forwardRef((e,t)=>{const r=U(),n=Me(),o=R(r.getPositionerProps(),e);return n.unmounted?null:a.jsx(I.div,{...o,ref:t})});tr.displayName="PopoverPositioner";const $n=e=>{const t=d.useId(),{getRootNode:r}=Ie(),{dir:n}=De(),o={id:t,dir:n,getRootNode:r,...e},i=He(Zr,o);return _r(i,Oe)},Ln=e=>{const[t,{children:r,...n}]=Et(e),o=$n(n),i=At(R({present:o.open},t));return a.jsx(Gt,{value:o,children:a.jsx(Tt,{value:i,children:r})})},Fn=e=>{const[t,{value:r,children:n}]=Et(e),o=At(R({present:r.open},t));return a.jsx(Gt,{value:r,children:a.jsx(Tt,{value:o,children:n})})},rr=d.forwardRef((e,t)=>{const r=U(),n=R(r.getTitleProps(),e);return a.jsx(I.div,{...n,ref:t})});rr.displayName="PopoverTitle";const nr=d.forwardRef((e,t)=>{const r=U(),n=Me(),o=R({...r.getTriggerProps(),"aria-controls":n.unmounted?void 0:r.getTriggerProps()["aria-controls"]},e);return a.jsx(I.button,{...o,ref:t})});nr.displayName="PopoverTrigger";const[or,ye]=me({name:"ProgressContext",hookName:"useProgressContext",providerName:"<ProgressProvider />"}),ar=d.forwardRef((e,t)=>{const r=ye(),n=R(r.getLabelProps(),e);return a.jsx(I.label,{...n,ref:t})});ar.displayName="ProgressLabel";const ir=d.forwardRef((e,t)=>{const r=ye(),n=R(r.getRangeProps(),e);return a.jsx(I.div,{...n,ref:t})});ir.displayName="ProgressRange";const Vn=e=>{const t=d.useId(),{getRootNode:r}=Ie(),{dir:n,locale:o}=De(),i={id:t,dir:n,locale:o,getRootNode:r,...e},s=He(tn,i);return en(s,Oe)},sr=d.forwardRef((e,t)=>{const[r,n]=ce()(e,["defaultValue","formatOptions","id","ids","locale","max","min","onValueChange","orientation","translations","value"]),o=Vn(r),i=R(o.getRootProps(),n);return a.jsx(or,{value:o,children:a.jsx(I.div,{...i,ref:t})})});sr.displayName="ProgressRoot";const lr=d.forwardRef((e,t)=>{const[{value:r},n]=ce()(e,["value"]),o=R(r.getRootProps(),n);return a.jsx(or,{value:r,children:a.jsx(I.div,{...o,ref:t})})});lr.displayName="ProgressRootProvider";const cr=d.forwardRef((e,t)=>{const r=ye(),n=R(r.getTrackProps(),e);return a.jsx(I.div,{...n,ref:t})});cr.displayName="ProgressTrack";const ur=d.forwardRef((e,t)=>{const{children:r,...n}=e,o=ye(),i=R(o.getValueTextProps(),n);return a.jsx(I.span,{...i,ref:t,children:r||o.percentAsString})});ur.displayName="ProgressValueText";const zn=d.forwardRef(function(t,r){const n=Rt({key:"button"}),[o,i]=d.useMemo(()=>n.splitVariantProps(t),[t,n]);return a.jsx(rn,{value:o,children:a.jsx(nn,{ref:r,...i})})}),Wn=d.forwardRef(function(t,r){const n=Rt({key:"checkmark",recipe:t.recipe}),[o,i]=n.splitVariantProps(t),{checked:s,indeterminate:c,disabled:l,unstyled:u,children:g,...p}=i,m=u?on:n(o);return a.jsx(ge.svg,{ref:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3px",strokeLinecap:"round",strokeLinejoin:"round","data-state":c?"indeterminate":s?"checked":"unchecked","data-disabled":an(l),css:[m,t.css],...p,children:c?a.jsx("path",{d:"M5 12h14"}):s?a.jsx("polyline",{points:"20 6 9 17 4 12"}):null})}),{withProvider:dr,withContext:fr,useStyles:Bn}=Ne({key:"checkbox"});dr(Ut,"root",{forwardAsChild:!0});const qn=dr(Kt,"root",{forwardAsChild:!0}),Kn=fr(qt,"label",{forwardAsChild:!0}),Un=d.forwardRef(function(t,r){const{checked:n,indeterminate:o,...i}=t,s=ve(),c=Bn();return n&&s.checked?a.jsx(ge.svg,{ref:r,asChild:!0,...i,css:[c.indicator,t.css],children:n}):o&&s.indeterminate?a.jsx(ge.svg,{ref:r,asChild:!0,...i,css:[c.indicator,t.css],children:o}):a.jsx(Wn,{ref:r,checked:s.checked,indeterminate:s.indeterminate,disabled:s.disabled,unstyled:!0,...i,css:[c.indicator,t.css]})}),Gn=fr(zt,"control",{forwardAsChild:!0,defaultProps:{children:a.jsx(Un,{})}});ge(Wt,{base:{display:"flex",flexDirection:"column",gap:"1.5"}},{forwardAsChild:!0});const Yn=Bt,{withRootProvider:pr,withContext:V}=Ne({key:"popover"});pr(Fn);const Xn=pr(Ln),Qn=V(nr,"trigger",{forwardAsChild:!0}),Jn=V(tr,"positioner",{forwardAsChild:!0}),Zn=V(Zt,"content",{forwardAsChild:!0}),_n=V(Qt,"arrowTip",{forwardAsChild:!0}),eo=V(Xt,"arrow",{forwardAsChild:!0,defaultProps:{children:a.jsx(_n,{})}});V(Jt,"closeTrigger",{forwardAsChild:!0});V(er,"indicator",{forwardAsChild:!0});V(rr,"title",{forwardAsChild:!0});V(_t,"description",{forwardAsChild:!0});V("footer","footer");V("header","header");const to=V("div","body");V(Yt,void 0,{forwardAsChild:!0});const{withProvider:gr,withContext:be}=Ne({key:"progress"});gr(lr,"root",{forwardAsChild:!0});const ro=gr(sr,"root");be(ar,"label",{forwardAsChild:!0});const no=be(cr,"track",{forwardAsChild:!0}),oo=be(ir,"range",{forwardAsChild:!0});be(ur,"valueText",{forwardAsChild:!0});const ao=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],io=$e("book-open-check",ao);const so=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ye=$e("plus",so);const lo=[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]],co=$e("smile-plus",lo);function de(){return d.useContext(sn)}function uo(){const{habits:e}=de(),t=e.length,r=e.filter(o=>o.isCompleted).length,n=Math.floor(r/t*100);return isNaN(n)?"":a.jsx(ue,{children:a.jsxs(z,{children:[a.jsxs(z,{mb:"1rem",direction:"row",alignItems:"end",gap:0,flexWrap:"wrap",children:[a.jsxs(oe,{display:"inline-block",size:{base:"2xl",md:"4xl"},fontWeight:700,children:[n,"%Â "]}),a.jsx(oe,{color:"fg.muted",display:"inline-block",size:{base:"md",md:"lg"},fontWeight:500,children:"out of 100%."})]}),a.jsx(ro,{value:n,defaultValue:0,colorPalette:"teal",children:a.jsx(It,{children:a.jsx(no,{flex:"1",children:a.jsx(oo,{})})})}),a.jsx(Le,{marginTop:".5em",color:"fg.muted",children:"Complete your daily goals to win both of your day and streak."})]})})}function Ee(e=new Date){const t=new Date(e);return t.setHours(0,0,0,0),t}function fo(){const[t,r]=d.useState(),[n,o]=d.useState(!0),[i,s]=d.useState();return d.useEffect(()=>{async function c(){try{const l=Ee(),u=Ee();u.setDate(l.getDate()+1);const g=localStorage.getItem("quote"),p=Number(localStorage.getItem("quote_expiry"));if(g&&p&&!(l.getTime()>p)){const y=JSON.parse(g);r(y),o(!1);return}const m=await fetch(void 0);if(!m.ok)throw Error(`An error has occurred: ${m.status}`);const h=await m.json();r(h),o(!1),localStorage.setItem("quote",JSON.stringify(h)),localStorage.setItem("quote_expiry",u.getTime())}catch(l){throw s(l.message),o(!1),Error(l.message)}}c()},[]),{quote:t,loading:n,error:i}}function po(){const{quote:e,loading:t,error:r}=fo();return r?a.jsxs(ln,{status:"error",children:[a.jsx(cn,{}),a.jsx(un,{children:"Quote load failed. Retry?"})]}):a.jsx(ue,{py:6,justifyItems:"center",children:t?a.jsx(J,{gap:0,lineHeight:1,children:a.jsx(dn,{color:"teal.500",size:"md"})}):a.jsxs(z,{width:"100%",gap:4,children:[a.jsx(oe,{fontWeight:500,size:{base:"md",md:"lg"},lineHeight:{base:1.25,md:1.3},children:e.quote}),a.jsxs(Le,{fontSize:"0.875rem",color:"fg.muted",children:["â€” ",e.author]})]})})}var xe={},te={},Xe;function hr(){if(Xe)return te;Xe=1,Object.defineProperty(te,"__esModule",{value:!0}),te.bind=void 0;function e(t,r){var n=r.type,o=r.listener,i=r.options;return t.addEventListener(n,o,i),function(){t.removeEventListener(n,o,i)}}return te.bind=e,te}var X={},Qe;function go(){if(Qe)return X;Qe=1;var e=X&&X.__assign||function(){return e=Object.assign||function(i){for(var s,c=1,l=arguments.length;c<l;c++){s=arguments[c];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])}return i},e.apply(this,arguments)};Object.defineProperty(X,"__esModule",{value:!0}),X.bindAll=void 0;var t=hr();function r(i){if(!(typeof i>"u"))return typeof i=="boolean"?{capture:i}:i}function n(i,s){if(s==null)return i;var c=e(e({},i),{options:e(e({},r(s)),r(i.options))});return c}function o(i,s,c){var l=s.map(function(u){var g=n(u,c);return(0,t.bind)(i,g)});return function(){l.forEach(function(g){return g()})}}return X.bindAll=o,X}var Je;function ho(){return Je||(Je=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var t=hr();Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return t.bind}});var r=go();Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return r.bindAll}})})(xe)),xe}var Z=ho(),mr="data-pdnd-honey-pot";function vr(e){return e instanceof Element&&e.hasAttribute(mr)}function yr(e){var t=document.elementsFromPoint(e.x,e.y),r=Dt(t,2),n=r[0],o=r[1];return n?vr(n)?o??null:n:null}function se(e){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(e)}function mo(e,t){if(se(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(se(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vo(e){var t=mo(e,"string");return se(t)=="symbol"?t:t+""}function Fe(e,t,r){return(t=vo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yo=2147483647;function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ze(Object(r),!0).forEach(function(n){Fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var le=2,et=le/2;function bo(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function xo(e){return{x:e.x-et,y:e.y-et}}function jo(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function wo(e){return{x:Math.min(e.x,window.innerWidth-le),y:Math.min(e.y,window.innerHeight-le)}}function tt(e){var t=e.client,r=wo(jo(xo(bo(t))));return DOMRect.fromRect({x:r.x,y:r.y,width:le,height:le})}function rt(e){var t=e.clientRect;return{left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}function ko(e){var t=e.client,r=e.clientRect;return t.x>=r.x&&t.x<=r.x+r.width&&t.y>=r.y&&t.y<=r.y+r.height}function Po(e){var t=e.initial,r=document.createElement("div");r.setAttribute(mr,"true");var n=tt({client:t});Object.assign(r.style,_e(_e({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},rt({clientRect:n})),{},{pointerEvents:"auto",zIndex:yo})),document.body.appendChild(r);var o=Z.bind(window,{type:"pointermove",listener:function(s){var c={x:s.clientX,y:s.clientY};n=tt({client:c}),Object.assign(r.style,rt({clientRect:n}))},options:{capture:!0}});return function(s){var c=s.current;if(o(),ko({client:c,clientRect:n})){r.remove();return}function l(){u(),r.remove()}var u=Z.bindAll(window,[{type:"pointerdown",listener:l},{type:"pointermove",listener:l},{type:"focusin",listener:l},{type:"focusout",listener:l},{type:"dragstart",listener:l},{type:"dragenter",listener:l},{type:"dragover",listener:l}],{capture:!0})}}function Co(){var e=null;function t(){return e=null,Z.bind(window,{type:"pointermove",listener:function(o){e={x:o.clientX,y:o.clientY}},options:{capture:!0}})}function r(){var n=null;return function(i){var s=i.eventName,c=i.payload;if(s==="onDragStart"){var l=c.location.initial.input,u=e??{x:l.clientX,y:l.clientY};n=Po({initial:u})}if(s==="onDrop"){var g,p=c.location.current.input;(g=n)===null||g===void 0||g({current:{x:p.clientX,y:p.clientY}}),n=null,e=null}}}return{bindEvents:t,getOnPostDispatch:r}}function So(e){if(Array.isArray(e))return fn(e)}function Eo(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ao(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function br(e){return So(e)||Eo(e)||pn(e)||Ao()}function _(e){var t=null;return function(){if(!t){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=e.apply(this,o);t={result:s}}return t.result}}var To=_(function(){return navigator.userAgent.includes("Firefox")}),Ve=_(function(){var t=navigator,r=t.userAgent;return r.includes("AppleWebKit")&&!r.includes("Chrome")}),Ae={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function Ro(e){var t=e.dragLeave;return Ve()?t.hasOwnProperty(Ae.isLeavingWindow):!1}(function(){if(typeof window>"u"||!Ve())return;function t(){return{enterCount:0,isOverWindow:!1}}var r=t();function n(){r=t()}Z.bindAll(window,[{type:"dragstart",listener:function(){r.enterCount=0,r.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(i){!r.isOverWindow&&r.enterCount===0&&(i[Ae.isEnteringWindow]=!0),r.isOverWindow=!0,r.enterCount++}},{type:"dragleave",listener:function(i){r.enterCount--,r.isOverWindow&&r.enterCount===0&&(i[Ae.isLeavingWindow]=!0,r.isOverWindow=!1)}}],{capture:!0})})();function Io(e){return"nodeName"in e}function Do(e){return Io(e)&&e.ownerDocument!==document}function Ho(e){var t=e.dragLeave,r=t.type,n=t.relatedTarget;return r!=="dragleave"?!1:Ve()?Ro({dragLeave:t}):n==null?!0:To()?Do(n):n instanceof HTMLIFrameElement}function Oo(e){var t=e.onDragEnd;return[{type:"pointermove",listener:(function(){var r=0;return function(){if(r<20){r++;return}t()}})()},{type:"pointerdown",listener:t}]}function ne(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var Mo=function(t){var r=[],n=null,o=function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];r=c,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return o.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},o},je=Mo(function(e){return e()}),fe=(function(){var e=null;function t(n){var o=requestAnimationFrame(function(){e=null,n()});e={frameId:o,fn:n}}function r(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:t,flush:r}})();function No(e){var t=e.source,r=e.initial,n=e.dispatchEvent,o={dropTargets:[]};function i(c){n(c),o={dropTargets:c.payload.location.current.dropTargets}}var s={start:function(l){var u=l.nativeSetDragImage,g={current:r,previous:o,initial:r};i({eventName:"onGenerateDragPreview",payload:{source:t,location:g,nativeSetDragImage:u}}),fe.schedule(function(){i({eventName:"onDragStart",payload:{source:t,location:g}})})},dragUpdate:function(l){var u=l.current;fe.flush(),je.cancel(),i({eventName:"onDropTargetChange",payload:{source:t,location:{initial:r,previous:o,current:u}}})},drag:function(l){var u=l.current;je(function(){fe.flush();var g={initial:r,previous:o,current:u};i({eventName:"onDrag",payload:{source:t,location:g}})})},drop:function(l){var u=l.current,g=l.updatedSourcePayload;fe.flush(),je.cancel(),i({eventName:"onDrop",payload:{source:g??t,location:{current:u,previous:o,initial:r}}})}};return s}var Te={isActive:!1};function xr(){return!Te.isActive}function $o(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function Lo(e){var t=e.current,r=e.next;if(t.length!==r.length)return!0;for(var n=0;n<t.length;n++)if(t[n].element!==r[n].element)return!0;return!1}function Fo(e){var t=e.event,r=e.dragType,n=e.getDropTargetsOver,o=e.dispatchEvent;if(!xr())return;var i=Vo({event:t,dragType:r,getDropTargetsOver:n});Te.isActive=!0;var s={current:i};we({event:t,current:i.dropTargets});var c=No({source:r.payload,dispatchEvent:o,initial:i});function l(h){var f=Lo({current:s.current.dropTargets,next:h.dropTargets});s.current=h,f&&c.dragUpdate({current:s.current})}function u(h){var f=ne(h),y=vr(h.target)?yr({x:f.clientX,y:f.clientY}):h.target,b=n({target:y,input:f,source:r.payload,current:s.current.dropTargets});b.length&&(h.preventDefault(),we({event:h,current:b})),l({dropTargets:b,input:f})}function g(){s.current.dropTargets.length&&l({dropTargets:[],input:s.current.input}),c.drop({current:s.current,updatedSourcePayload:null}),p()}function p(){Te.isActive=!1,m()}var m=Z.bindAll(window,[{type:"dragover",listener:function(f){u(f),c.drag({current:s.current})}},{type:"dragenter",listener:u},{type:"dragleave",listener:function(f){Ho({dragLeave:f})&&(l({input:s.current.input,dropTargets:[]}),r.startedFrom==="external"&&g())}},{type:"drop",listener:function(f){if(s.current={dropTargets:s.current.dropTargets,input:ne(f)},!s.current.dropTargets.length){g();return}f.preventDefault(),we({event:f,current:s.current.dropTargets}),c.drop({current:s.current,updatedSourcePayload:r.type==="external"?r.getDropPayload(f):null}),p()}},{type:"dragend",listener:function(f){s.current={dropTargets:s.current.dropTargets,input:ne(f)},g()}}].concat(br(Oo({onDragEnd:g}))),{capture:!0});c.start({nativeSetDragImage:$o(t)})}function we(e){var t,r=e.event,n=e.current,o=(t=n[0])===null||t===void 0?void 0:t.dropEffect;o!=null&&r.dataTransfer&&(r.dataTransfer.dropEffect=o)}function Vo(e){var t=e.event,r=e.dragType,n=e.getDropTargetsOver,o=ne(t);if(r.startedFrom==="external")return{input:o,dropTargets:[]};var i=n({input:o,source:r.payload,target:t.target,current:[]});return{input:o,dropTargets:i}}var nt={canStart:xr,start:Fo},Re=new Map;function zo(e){var t=e.typeKey,r=e.mount,n=Re.get(t);if(n)return n.usageCount++,n;var o={typeKey:t,unmount:r(),usageCount:1};return Re.set(t,o),o}function Wo(e){var t=zo(e);return function(){t.usageCount--,!(t.usageCount>0)&&(t.unmount(),Re.delete(e.typeKey))}}function ze(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){t.forEach(function(o){return o()})}}function jr(e,t){var r=t.attribute,n=t.value;return e.setAttribute(r,n),function(){return e.removeAttribute(r)}}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ot(Object(r),!0).forEach(function(n){Fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ke(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bo(e))||t){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){c=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(c)throw i}}}}function Bo(e,t){if(e){if(typeof e=="string")return at(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}function at(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e){return e.slice(0).reverse()}function qo(e){var t=e.typeKey,r=e.defaultDropEffect,n=new WeakMap,o="data-drop-target-for-".concat(t),i="[".concat(o,"]");function s(h){return n.set(h.element,h),function(){return n.delete(h.element)}}function c(h){var f=ze(jr(h.element,{attribute:o,value:"true"}),s(h));return _(f)}function l(h){var f,y,b,v,w=h.source,k=h.target,P=h.input,x=h.result,j=x===void 0?[]:x;if(k==null)return j;if(!(k instanceof Element))return k instanceof Node?l({source:w,target:k.parentElement,input:P,result:j}):j;var S=k.closest(i);if(S==null)return j;var C=n.get(S);if(C==null)return j;var A={input:P,source:w,element:C.element};if(C.canDrop&&!C.canDrop(A))return l({source:w,target:C.element.parentElement,input:P,result:j});var D=(f=(y=C.getData)===null||y===void 0?void 0:y.call(C,A))!==null&&f!==void 0?f:{},L=(b=(v=C.getDropEffect)===null||v===void 0?void 0:v.call(C,A))!==null&&b!==void 0?b:r,H={data:D,element:C.element,dropEffect:L,isActiveDueToStickiness:!1};return l({source:w,target:C.element.parentElement,input:P,result:[].concat(br(j),[H])})}function u(h){var f=h.eventName,y=h.payload,b=ke(y.location.current.dropTargets),v;try{for(b.s();!(v=b.n()).done;){var w,k=v.value,P=n.get(k.element),x=G(G({},y),{},{self:k});P==null||(w=P[f])===null||w===void 0||w.call(P,x)}}catch(j){b.e(j)}finally{b.f()}}var g={onGenerateDragPreview:u,onDrag:u,onDragStart:u,onDrop:u,onDropTargetChange:function(f){var y=f.payload,b=new Set(y.location.current.dropTargets.map(function(ee){return ee.element})),v=new Set,w=ke(y.location.previous.dropTargets),k;try{for(w.s();!(k=w.n()).done;){var P,x=k.value;v.add(x.element);var j=n.get(x.element),S=b.has(x.element),C=G(G({},y),{},{self:x});if(j==null||(P=j.onDropTargetChange)===null||P===void 0||P.call(j,C),!S){var A;j==null||(A=j.onDragLeave)===null||A===void 0||A.call(j,C)}}}catch(ee){w.e(ee)}finally{w.f()}var D=ke(y.location.current.dropTargets),L;try{for(D.s();!(L=D.n()).done;){var H,T,E=L.value;if(!v.has(E.element)){var M=G(G({},y),{},{self:E}),W=n.get(E.element);W==null||(H=W.onDropTargetChange)===null||H===void 0||H.call(W,M),W==null||(T=W.onDragEnter)===null||T===void 0||T.call(W,M)}}}catch(ee){D.e(ee)}finally{D.f()}}};function p(h){g[h.eventName](h)}function m(h){var f=h.source,y=h.target,b=h.input,v=h.current,w=l({source:f,target:y,input:b});if(w.length>=v.length)return w;for(var k=Pe(v),P=Pe(w),x=[],j=0;j<k.length;j++){var S,C=k[j],A=P[j];if(A!=null){x.push(A);continue}var D=x[j-1],L=k[j-1];if(D?.element!==L?.element)break;var H=n.get(C.element);if(!H)break;var T={input:b,source:f,element:H.element};if(H.canDrop&&!H.canDrop(T)||!((S=H.getIsSticky)!==null&&S!==void 0&&S.call(H,T)))break;x.push(G(G({},C),{},{isActiveDueToStickiness:!0}))}return Pe(x)}return{dropTargetForConsumers:c,getIsOver:m,dispatchEvent:p}}function Ko(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Uo(e))||t){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){c=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(c)throw i}}}}function Uo(e,t){if(e){if(typeof e=="string")return it(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}function it(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?st(Object(r),!0).forEach(function(n){Fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yo(){var e=new Set,t=null;function r(i){t&&(!i.canMonitor||i.canMonitor(t.canMonitorArgs))&&t.active.add(i)}function n(i){var s=Go({},i);e.add(s),r(s);function c(){e.delete(s),t&&t.active.delete(s)}return _(c)}function o(i){var s=i.eventName,c=i.payload;if(s==="onGenerateDragPreview"){t={canMonitorArgs:{initial:c.location.initial,source:c.source},active:new Set};var l=Ko(e),u;try{for(l.s();!(u=l.n()).done;){var g=u.value;r(g)}}catch(b){l.e(b)}finally{l.f()}}if(t){for(var p=Array.from(t.active),m=0,h=p;m<h.length;m++){var f=h[m];if(t.active.has(f)){var y;(y=f[s])===null||y===void 0||y.call(f,c)}}s==="onDrop"&&(t.active.clear(),t=null)}}return{dispatchEvent:o,monitorForConsumers:n}}function Xo(e){var t=e.typeKey,r=e.mount,n=e.dispatchEventToSource,o=e.onPostDispatch,i=e.defaultDropEffect,s=Yo(),c=qo({typeKey:t,defaultDropEffect:i});function l(p){n?.(p),c.dispatchEvent(p),s.dispatchEvent(p),o?.(p)}function u(p){var m=p.event,h=p.dragType;nt.start({event:m,dragType:h,getDropTargetsOver:c.getIsOver,dispatchEvent:l})}function g(){function p(){var m={canStart:nt.canStart,start:u};return r(m)}return Wo({typeKey:t,mount:p})}return{registerUsage:g,dropTarget:c.dropTargetForConsumers,monitor:s.monitorForConsumers}}var Qo=_(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Jo="pdnd:android-fallback",lt="text/plain",Zo="text/uri-list",_o="application/vnd.pdnd",he=new WeakMap;function ea(e){return he.set(e.element,e),function(){he.delete(e.element)}}var ct=Co(),wr=Xo({typeKey:"element",defaultDropEffect:"move",mount:function(t){return ze(ct.bindEvents(),Z.bind(document,{type:"dragstart",listener:function(n){var o,i,s,c,l,u;if(t.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var g=n.target;if(g instanceof HTMLElement){var p=he.get(g);if(p){var m=ne(n),h={element:p.element,dragHandle:(o=p.dragHandle)!==null&&o!==void 0?o:null,input:m};if(p.canDrag&&!p.canDrag(h)){n.preventDefault();return}if(p.dragHandle){var f=yr({x:m.clientX,y:m.clientY});if(!p.dragHandle.contains(f)){n.preventDefault();return}}var y=(i=(s=p.getInitialDataForExternal)===null||s===void 0?void 0:s.call(p,h))!==null&&i!==void 0?i:null;if(y)for(var b=0,v=Object.entries(y);b<v.length;b++){var w=Dt(v[b],2),k=w[0],P=w[1];n.dataTransfer.setData(k,P??"")}Qo()&&!n.dataTransfer.types.includes(lt)&&!n.dataTransfer.types.includes(Zo)&&n.dataTransfer.setData(lt,Jo),n.dataTransfer.setData(_o,"");var x={element:p.element,dragHandle:(c=p.dragHandle)!==null&&c!==void 0?c:null,data:(l=(u=p.getInitialData)===null||u===void 0?void 0:u.call(p,h))!==null&&l!==void 0?l:{}},j={type:"element",payload:x,startedFrom:"internal"};t.start({event:n,dragType:j})}}}}}))},dispatchEventToSource:function(t){var r,n,o=t.eventName,i=t.payload;(r=he.get(i.source.element))===null||r===void 0||(n=r[o])===null||n===void 0||n.call(r,i)},onPostDispatch:ct.getOnPostDispatch()}),ta=wr.dropTarget;function ra(e){var t=ze(wr.registerUsage(),ea(e),jr(e.element,{attribute:"draggable",value:"true"}));return _(t)}var na=Object.defineProperty,oa=(e,t)=>{for(var r in t)na(e,r,{get:t[r],enumerable:!0})},Q={};oa(Q,{ActiveEmoji:()=>qr,Empty:()=>Br,List:()=>Vr,Loading:()=>Wr,Root:()=>Hr,Search:()=>Or,SkinTone:()=>Kr,SkinToneSelector:()=>zr,Viewport:()=>Mr});var kr="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",We=["none","light","medium-light","medium","medium-dark","dark"];function Ce(e){return e.charAt(0).toUpperCase()+e.slice(1)}var B=2,N=null;function ut(e){try{N??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{}if(!N||(queueMicrotask(()=>{N&&(N=null)}),N.canvas.width=B,N.canvas.height=B,N.font=`2px ${kr}`,N.textBaseline="middle",N.measureText(e).width>=B*2))return!1;N.fillStyle="#00f",N.fillText(e,0,0);let t=N.getImageData(0,0,B,B).data;N.clearRect(0,0,B,B),N.fillStyle="#f00",N.fillText(e,0,0);let r=N.getImageData(0,0,B,B).data;for(let n=0;n<B*B*4;n+=4)if(t[n]!==r[n]||t[n+1]!==r[n+1]||t[n+2]!==r[n+2])return!1;return!0}function dt(e,t,r){try{let n=e.getItem(t);if(!n)throw new Error(`No value found for "${t}".`);let o=JSON.parse(n);return r(o)}catch{return null}}function Pr(e,t,r){e.setItem(t,JSON.stringify(r))}function ft(e){return t=>t===void 0?void 0:e(t)}function pt(e){return t=>t===null?null:e(t)}function O(e){if(typeof e!="string")throw new Error;return e}function pe(e){if(typeof e!="number")throw new Error;return e}function Cr(e){if(typeof e!="boolean")throw new Error;return e}function Y(e){return t=>{if(typeof t!="object"||t===null)throw new Error;let r={};for(let n in e){let o=t[n];o===void 0&&e[n](void 0),r[n]=e[n](o)}return r}}function Se(e){return t=>{if(!Array.isArray(t))throw new Error;return t.length>0&&e(t[0]),t}}var Sr=(e,t)=>`${e}/${t}/data.json`,Er=(e,t)=>`${e}/${t}/messages.json`,aa=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],gt="en",Ar=e=>`frimousse/data/${e}`,ht="frimousse/metadata";async function mt(e,t){try{return(await fetch(e,{method:"HEAD",signal:t})).headers.get("etag")}catch{return null}}async function ia(e,t,r){let[{emojis:n,emojisEtag:o},{messages:i,messagesEtag:s}]=await Promise.all([fetch(Sr(e,t),{signal:r}).then(async c=>({emojis:await c.json(),emojisEtag:c.headers.get("etag")})),fetch(Er(e,t),{signal:r}).then(async c=>({messages:await c.json(),messagesEtag:c.headers.get("etag")}))]);return{emojis:n,messages:i,emojisEtag:o,messagesEtag:s}}async function sa(e,t,r){let[n,o]=await Promise.all([mt(Sr(e,t),r),mt(Er(e,t),r)]);return{emojisEtag:n,messagesEtag:o}}function la(e){return e.skins?e.skins.filter(t=>typeof t.tone=="number").reduce((t,r)=>{let n=We[r.tone];return t[n]=r.emoji,t},{}):void 0}async function vt(e,t,r){let{emojis:n,emojisEtag:o,messages:i,messagesEtag:s}=await ia(e,t,r),c=i.subgroups.find(f=>f.key==="country-flag"||f.key==="subdivision-flag"),l=i.groups.filter(f=>f.key!=="component"),u=n.filter(f=>"group"in f),g=l.map(f=>({index:f.order,label:Ce(f.message)})),p=i.skinTones.reduce((f,y)=>(f[y.key]=Ce(y.message),f),{}),m=u.map(f=>({emoji:f.emoji,category:f.group,version:f.version,label:Ce(f.label),tags:f.tags??[],countryFlag:c&&f.subgroup===c.order||void 0,skins:la(f)})),h={locale:t,emojis:m,categories:g,skinTones:p};return Pr(localStorage,Ar(t),{data:h,metadata:{emojisEtag:o,messagesEtag:s}}),h}function ca(e,t){let r=new Map;for(let s of e)r.has(s.version)||r.set(s.version,s.emoji);let n=[...r.keys()].sort((s,c)=>c-s),o=n[0]??0,i=ut("ðŸ‡ªðŸ‡º");if(typeof t=="number")return{emojiVersion:t,countryFlags:i};for(let s of n){let c=r.get(s);if(ut(c))return{emojiVersion:s,countryFlags:i}}return{emojiVersion:o,countryFlags:i}}var ua=Y({emojiVersion:pe,countryFlags:Cr}),da=Y({data:Y({locale:O,emojis:Se(Y({emoji:O,category:pe,label:O,version:pe,tags:Se(O),countryFlag:ft(Cr),skins:ft(Y({light:O,"medium-light":O,medium:O,"medium-dark":O,dark:O}))})),categories:Se(Y({index:pe,label:O})),skinTones:Y({light:O,"medium-light":O,medium:O,"medium-dark":O,dark:O})}),metadata:Y({emojisEtag:pt(O),messagesEtag:pt(O)})});async function fa({locale:e,emojiVersion:t,emojibaseUrl:r,signal:n}){let o=typeof r=="string"?r:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof t=="number"?Math.floor(t):"latest"}`,i=dt(sessionStorage,ht,ua),s=dt(localStorage,Ar(e),da),c;if(!s)c=await vt(o,e,n);else if(i)c=s.data;else try{let{emojisEtag:u,messagesEtag:g}=await sa(o,e,n);c=!u||!g||u!==s.metadata.emojisEtag||g!==s.metadata.messagesEtag?await vt(o,e,n):s.data}catch{c=s.data}i??=ca(c.emojis,t),Pr(sessionStorage,ht,i);let l=c.emojis.filter(u=>{let g=u.version<=i.emojiVersion;return u.countryFlag?g&&i.countryFlags:g});return{locale:e,emojis:l,categories:c.categories,skinTones:c.skinTones}}function yt(e){return aa.includes(e)?e:(console.warn(`Locale "${e}" is not supported, using "${gt}" instead.`),gt)}function bt(e){return We.includes(e)?e:(console.warn(`Skin tone "${e}" is not valid, using "none" instead.`),"none")}function pa(e,t){let r=[];if(t<=0)return r;for(let n=0,o=e.length;n<o;n+=t)r.push(e.slice(n,n+t));return r}function ga(e,t){if(!t)return e;let r=t.toLowerCase().trim(),n=new WeakMap;return e.filter(o=>{let i=0;o.label.toLowerCase().includes(r)&&(i+=10);for(let s of o.tags)s.toLowerCase().includes(r)&&(i+=1);return i>0?(n.set(o,i),!0):!1}).sort((o,i)=>(n.get(i)??0)-(n.get(o)??0))}function ha(e,t,r,n){let o=ga(e.emojis,n),i=[],s=[],c=[],l={},u=0,g=0;for(let p of o)l[p.category]||(l[p.category]=[]),l[p.category].push({emoji:r&&r!=="none"&&p.skins?p.skins[r]:p.emoji,label:p.label});for(let p of e.categories){let m=l[p.index];if(!m||m.length===0)continue;let h=pa(Array.from(m),t).map(f=>({categoryIndex:u,emojis:f}));i.push(...h),s.push({label:p.label,rowsCount:h.length,startRowIndex:g}),c.push(g),u++,g+=h.length}return{count:o.length,categories:s,categoriesStartRowIndices:c,rows:i,skinTones:e.skinTones}}function ma(e){let t={},r=null,n=null,o=new Set,i=()=>{if(r){t=r,r=null;for(let u of o)u(t)}n=null},s=()=>r??t,c=u=>{r??=t,Object.assign(r,typeof u=="function"?u(s()):u),n||(n=requestAnimationFrame(i))},l=u=>(o.add(u),()=>o.delete(u));return t=e(c,s),{get:s,set:c,subscribe:l}}function va(e){let[t]=d.useState(e);return t}function ya(e){let t=d.createContext(null);return{useStore:()=>{let r=d.useContext(t);if(!r)throw new Error(e);return r},Provider:({store:r,children:n})=>a.jsx(t.Provider,{value:r,children:n})}}function F(e,t,r=Object.is){let[n,o]=d.useState(()=>t(e.get()));return d.useEffect(()=>e.subscribe(()=>{let i=t(e.get());o(s=>r(s,i)?s:i)}),[e,t,r]),d.useDebugValue(n),n}function K(e,t,r){let n=d.useCallback(o=>o[t],[t]);return F(e,n,r)}var xt=2;function ba(e,t,r,n,o){let i=0;return ma((s,c)=>({locale:t,columns:r,sticky:n,skinTone:o,onEmojiSelect:e,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:l=>{let u=c(),g=l?.data??u.data,p=l?.categoryHeaderHeight??u.categoryHeaderHeight,m=l?.rowHeight??u.rowHeight,h=l?.viewportHeight??u.viewportHeight;if(!g||g.rows.length===0||!p||!m||!h)return s({...l,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let f=0,y=0;for(let C of g.categories)if(y++*p+C.startRowIndex*m<i)f+=p;else break;let b=g.categories.length*p+g.rows.length*m,v=Math.floor(xt*m/2),w=Math.ceil(xt*m/2),k=Math.min(i-f-v,b-h),P=k+h+w,x=Math.max(0,Math.floor(k/m)),j=Math.min(g.rows.length-1,Math.ceil(P/m)),S=g.rows[x]?.categoryIndex;return s(S===void 0&&l?l:{...l,viewportStartCategoryIndex:S,viewportStartRowIndex:x,viewportEndRowIndex:j})},onDataChange:l=>{c().updateViewportState({data:l,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:l=>{s({search:l,interaction:l?"keyboard":"none"})},onActiveEmojiChange:(l,u,g)=>{if(s({interaction:l,activeColumnIndex:u,activeRowIndex:g}),l!=="keyboard")return;let{listRef:p,viewportRef:m,sticky:h,rowHeight:f,viewportHeight:y,categoryHeaderHeight:b}=c(),v=p?.current,w=m?.current;if(!v||!w||!f||!b||!y)return;let k=g;k===0&&w.scrollTo({top:0,behavior:"instant"});let P=v.querySelector(`[aria-rowindex="${k}"]`);if(!(P instanceof HTMLElement))return;let x=P.offsetTop,j=getComputedStyle(P),S=Number.parseFloat(j.scrollMarginTop),C=Number.parseFloat(j.scrollMarginBottom),A=i+S;h&&x<i+y/2&&(A+=b);let D=A+y-C;(x<A||x+f>D)&&w.scrollTo({top:Math.max(x<A+b?x-Math.max(h?b:0,S):x-y+f+C,0),behavior:"instant"})},onActiveEmojiReset:()=>{s({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:l=>{c().updateViewportState({rowHeight:l})},onCategoryHeaderHeightChange:l=>{c().updateViewportState({categoryHeaderHeight:l})},onViewportSizeChange:(l,u)=>{c().updateViewportState({viewportWidth:l,viewportHeight:u})},onViewportScroll:l=>{i=l,c().updateViewportState()}}))}var{useStore:$,Provider:xa}=ya("EmojiPicker.Root is missing.");function ja(e){return e.search}function Be(e){return e.interaction==="none"?void 0:e.data?.rows[e.activeRowIndex]?.emojis[e.activeColumnIndex]}function wa(e){return e.data===void 0||typeof e.data?.count=="number"&&e.data.count===0}function ka(e){return e.data===null||e.viewportHeight===null||e.rowHeight===null||e.categoryHeaderHeight===null}function Tr(e){return e.data?.rows.length}function Pa(e){return e.data?.categories.length}function Ca(e){return e.data?.categoriesStartRowIndices}function Sa(e){return e.data?.skinTones}function Rr(e,t){return e?.emoji===t?.emoji}function Ea(e,t){return e?.categoryIndex!==t?.categoryIndex||e?.emojis.length!==t?.emojis.length?!1:!!e?.emojis.every((r,n)=>Rr(r,t?.emojis[n]))}var re="â€",jt=new RegExp("\\p{Emoji_Modifier_Base}","u"),Aa=/\uFE0F$/,Ta=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Ra={light:"ðŸ»","medium-light":"ðŸ¼",medium:"ðŸ½","medium-dark":"ðŸ¾",dark:"ðŸ¿"};function Ia(e,t){if(!e.split(re).some(n=>jt.test(n)))return e;let r=e.split(re).map(n=>n.replace(Ta,"")).join(re);return t==="none"?r:r.split(re).map((n,o,i)=>{let s=i.length>1;return!jt.test(n)||s&&n==="ðŸ¤"?n:n.replace(Aa,"")+Ra[t]}).join(re)}function Da(e){return We.map(t=>({skinTone:t,emoji:Ia(e,t)}))}function Ir(){let e=$(),t=F(e,Be,Rr);return d.useDeferredValue(t)}function Dr(e="âœ‹"){let t=$(),r=K(t,"skinTone"),n=d.useMemo(()=>Da(e),[e]),o=d.useCallback(i=>{t.set({skinTone:i})},[]);return[r,o,n]}function qe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||typeof t!="object"||e===null||t===null||Array.isArray(e)!==Array.isArray(t))return!1;let r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(o=>o in t&&e[o]===t[o])}function Ha(...e){}function Oa(e,t){let r=null;if(typeof window.requestIdleCallback=="function")r=window.requestIdleCallback(e,t);else{let n=Date.now();r=window.setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,t?.timeout-(Date.now()-n))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(r):window.clearTimeout(r)}}var q=typeof window<"u"?d.useLayoutEffect:d.useEffect;function Ma(e){let t=d.useRef(e);return q(()=>{t.current=e}),d.useCallback((...r)=>t.current(...r),[])}function Na({emojiVersion:e,emojibaseUrl:t}){let[r,n]=d.useState(void 0),o=$(),i=K(o,"locale"),s=K(o,"columns"),c=K(o,"skinTone"),l=K(o,"search");return d.useEffect(()=>{let u=new AbortController,g=u.signal;return fa({locale:i,emojiVersion:e,emojibaseUrl:t,signal:g}).then(p=>{n(p)}).catch(p=>{g.aborted||console.error(p)}),()=>{u.abort()}},[e,t,i]),d.useEffect(()=>{if(r)return Oa(()=>{o.get().onDataChange(ha(r,s,c,l))},{timeout:100})},[r,s,c,l]),null}var Hr=d.forwardRef(({locale:e="en",columns:t=9,skinTone:r="none",onEmojiSelect:n=Ha,emojiVersion:o,emojibaseUrl:i,onFocusCapture:s,onBlurCapture:c,children:l,style:u,sticky:g=!0,...p},m)=>{let h=Ma(n),f=va(()=>ba(h,yt(e),t,g,bt(r))),[y,b]=d.useState(!1),v=d.useRef(null),w=d.useCallback(x=>{x&&(v.current=x,f.set({rootRef:v}))},[]);q(()=>{f.set({locale:yt(e)})},[e]),q(()=>{f.set({columns:t})},[t]),q(()=>{f.set({sticky:g})},[g]),q(()=>{f.set({skinTone:bt(r)})},[r]);let k=d.useCallback(x=>{s?.(x);let{searchRef:j,viewportRef:S}=f.get(),C=x.target===j?.current||x.target.hasAttribute("frimousse-search"),A=x.target===S?.current||x.target.hasAttribute("frimousse-viewport");x.isDefaultPrevented()||(b(C||A),x.isDefaultPrevented()||(b(C||A),A?f.get().onActiveEmojiChange("keyboard",0,0):C&&f.get().search===""&&f.set({interaction:"none"})))},[s]),P=d.useCallback(x=>{c?.(x),!x.isDefaultPrevented()&&!x.currentTarget.contains(x.relatedTarget)&&b(!1)},[c]);return q(()=>{y||f.get().onActiveEmojiReset()},[y]),d.useImperativeHandle(m,()=>v.current),d.useEffect(()=>{if(!y)return;function x(j){if(j.defaultPrevented||!j.key.startsWith("Arrow")&&j.key!=="Enter")return;let{data:S,onEmojiSelect:C,onActiveEmojiChange:A,interaction:D,activeColumnIndex:L,activeRowIndex:H}=f.get();if(j.key==="Enter"){let T=Be(f.get());T&&(j.preventDefault(),C(T))}if(j.key.startsWith("Arrow")){let T=L,E=H;if(j.preventDefault(),D!=="none"){if(S?.rows&&S.rows.length>0)switch(j.key){case"ArrowLeft":{if(T===0){let M=E-1,W=S.rows[M];W&&(E=M,T=W.emojis.length-1)}else T-=1;break}case"ArrowRight":{if(T===S.rows[E].emojis.length-1){let M=E+1;S.rows[M]&&(E=M,T=0)}else T+=1;break}case"ArrowUp":{let M=S.rows[E-1];M&&(E-=1,M.emojis[T]||(T=M.emojis.length-1));break}case"ArrowDown":{let M=S.rows[E+1];M&&(E+=1,M.emojis[T]||(T=M.emojis.length-1));break}}A("keyboard",T,E)}else A("keyboard",0,0)}}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[y]),q(()=>{let x=null,j=null,S=null,C=null,A=f.subscribe(E=>{v.current&&(x!==E.viewportWidth&&(x=E.viewportWidth,v.current.style.setProperty("--frimousse-viewport-width",`${E.viewportWidth}px`)),j!==E.viewportHeight&&(j=E.viewportHeight,v.current.style.setProperty("--frimousse-viewport-height",`${E.viewportHeight}px`)),S!==E.rowHeight&&(S=E.rowHeight,v.current.style.setProperty("--frimousse-row-height",`${E.rowHeight}px`)),C!==E.categoryHeaderHeight&&(C=E.categoryHeaderHeight,v.current.style.setProperty("--frimousse-category-header-height",`${E.categoryHeaderHeight}px`)))}),{viewportWidth:D,viewportHeight:L,rowHeight:H,categoryHeaderHeight:T}=f.get();return D&&v.current.style.setProperty("--frimousse-viewport-width",`${D}px`),L&&v.current.style.setProperty("--frimousse-viewport-height",`${L}px`),H&&v.current.style.setProperty("--frimousse-row-height",`${H}px`),T&&v.current.style.setProperty("--frimousse-category-header-height",`${T}px`),A},[]),a.jsx("div",{"data-focused":y?"":void 0,"frimousse-root":"",onBlurCapture:P,onFocusCapture:k,...p,ref:w,style:{"--frimousse-emoji-font":kr,...u},children:a.jsxs(xa,{store:f,children:[a.jsx(Na,{emojiVersion:o,emojibaseUrl:i}),l]})})}),Or=d.forwardRef(({value:e,defaultValue:t,onChange:r,...n},o)=>{let i=$(),s=d.useRef(null),c=d.useCallback(p=>{p&&(s.current=p,i.set({searchRef:s}))},[]),l=typeof e=="string",u=d.useRef(l);d.useEffect(()=>{u.current=l},[l]),q(()=>{i.set({search:typeof e=="string"?e:typeof t=="string"?t:""})},[]),q(()=>{typeof e=="string"&&i.get().onSearchChange(e)},[e]);let g=d.useCallback(p=>{r?.(p),p.isDefaultPrevented()||i.get().onSearchChange(p.target.value)},[r]);return d.useImperativeHandle(o,()=>s.current),a.jsx("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Searchâ€¦",spellCheck:!1,type:"search",...n,defaultValue:t,onChange:g,ref:c,value:e})}),$a=d.memo(()=>{let e=Ir();return e?a.jsx("div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:e.label}):null}),Mr=d.forwardRef(({children:e,onScroll:t,onKeyDown:r,style:n,...o},i)=>{let s=$(),c=d.useRef(null),l=d.useCallback(m=>{m&&(c.current=m,s.set({viewportRef:c}))},[]),u=F(s,Tr),g=F(s,Pa),p=d.useCallback(m=>{t?.(m),s.get().onViewportScroll(m.currentTarget.scrollTop)},[t]);return q(()=>{if(!c.current)return;let m=new ResizeObserver(([h])=>{let f=h?.borderBoxSize[0]?.inlineSize??0,y=h?.borderBoxSize[0]?.blockSize??0,{onViewportSizeChange:b,viewportHeight:v,viewportWidth:w}=s.get();(v!==y||w!==f)&&b(f,y)});return m.observe(c.current),s.get().onViewportSizeChange(c.current.offsetWidth,c.current.clientHeight),()=>{m.disconnect()}},[]),d.useImperativeHandle(i,()=>c.current),a.jsxs("div",{"frimousse-viewport":"",...o,onScroll:p,ref:l,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof u=="number"&&typeof g=="number"?`var(--frimousse-viewport-width, auto) calc(${u} * var(--frimousse-row-height) + ${g} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...n},children:[a.jsx($a,{}),e]})});function Nr(e,t,r){return{emoji:{...e,isActive:r},role:"gridcell","aria-colindex":t,"aria-selected":r||void 0,"aria-label":e.label,"data-active":r?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function $r(e,t=!1){return{role:t?void 0:"row","aria-rowindex":t?void 0:e,"frimousse-row":"",style:{contain:t?void 0:"content",height:t?void 0:"var(--frimousse-row-height)",display:"flex"}}}function Lr(e,t){return{"frimousse-category":"",style:{contain:"content",top:t?`calc(${e} * var(--frimousse-category-header-height) + ${t.startRowIndex} * var(--frimousse-row-height))`:void 0,height:t?`calc(var(--frimousse-category-header-height) + ${t.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function Fr(e,t=!1,r=!0){return{category:e,"frimousse-category-header":"",style:{contain:t?void 0:"layout paint",height:t?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:r?"sticky":void 0,top:0}}}function wt(e,t,r,n){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${e} * var(--frimousse-row-height) + ${t} * var(--frimousse-category-header-height))`,paddingTop:`calc(${r} * var(--frimousse-row-height) + ${n} * var(--frimousse-category-header-height))`}}}function kt(e,t,r){return{"aria-colcount":e,"aria-rowcount":t,"frimousse-list":"",style:{"--frimousse-list-columns":e,...r},role:"grid"}}function La(e){e.preventDefault()}var Fa=d.memo(({Emoji:e,emoji:t,columnIndex:r,rowIndex:n})=>{let o=$(),i=F(o,u=>Be(u)?.emoji===t.emoji),s=d.useCallback(()=>{o.get().onEmojiSelect(t)},[t]),c=d.useCallback(()=>{o.get().onActiveEmojiChange("pointer",r,n)},[r,n]),l=d.useCallback(()=>{o.get().onActiveEmojiReset()},[]);return a.jsx(e,{...Nr(t,r,i),onClick:s,onPointerDown:La,onPointerEnter:c,onPointerLeave:l})}),Va=d.memo(({Row:e,Emoji:t,rowIndex:r})=>{let n=$(),o=F(n,i=>i.data?.rows[r],Ea);return o?a.jsx(e,{...$r(r),children:o.emojis.map((i,s)=>a.jsx(Fa,{Emoji:t,columnIndex:s,emoji:i,rowIndex:r},i.label))}):null}),za=d.memo(({CategoryHeader:e,categoryIndex:t})=>{let r=$(),n=F(r,i=>i.data?.categories[t],qe),o=K(r,"sticky");return n?a.jsx("div",{...Lr(t,n),children:a.jsx(e,{...Fr({label:n.label},!1,o)})}):null}),Pt=d.memo(({CategoryHeader:e,Row:t,Emoji:r})=>{let n=d.useRef(null),o=$(),i=K(o,"columns"),s=d.useMemo(()=>Array(i).fill({emoji:"ðŸ™‚",label:""}),[i]),c=d.useMemo(()=>({label:"Category"}),[]),l=d.useRef(null),u=d.useRef(null);return q(()=>{let g=n.current?.parentElement?.parentElement;if(!g||!l.current||!u.current)return;let p=new ResizeObserver(f=>{for(let y of f){let b=y.contentRect.height,{onRowHeightChange:v,onCategoryHeaderHeightChange:w,rowHeight:k,categoryHeaderHeight:P}=o.get();y.target===l.current&&k!==b&&v(b),y.target===u.current&&P!==b&&w(b)}});p.observe(g),p.observe(l.current),p.observe(u.current);let{onRowHeightChange:m,onCategoryHeaderHeightChange:h}=o.get();return m(l.current.clientHeight),h(u.current.clientHeight),()=>{p.disconnect()}},[]),a.jsxs("div",{"aria-hidden":!0,ref:n,style:{height:0,visibility:"hidden"},children:[a.jsx("div",{"frimousse-row-sizer":"",ref:l,children:a.jsx(t,{...$r(-1,!0),children:s.map((g,p)=>a.jsx(r,{...Nr(g,p,!1)},p))})}),a.jsx("div",{...Lr(-1),children:a.jsx("div",{"frimousse-category-header-sizer":"",ref:u,children:a.jsx(e,{...Fr(c,!0)})})})]})});function Wa({category:e,...t}){return a.jsx("div",{...t,children:e.label})}function Ba({emoji:e,...t}){return a.jsx("button",{type:"button",...t,children:e.emoji})}function qa({...e}){return a.jsx("div",{...e})}var Vr=d.forwardRef(({style:e,components:t,...r},n)=>{let o=$(),i=d.useRef(null),s=d.useCallback(v=>{v&&(i.current=v,o.set({listRef:i}))},[]),c=t?.CategoryHeader??Wa,l=t?.Emoji??Ba,u=t?.Row??qa,g=K(o,"columns"),p=K(o,"viewportStartRowIndex"),m=K(o,"viewportEndRowIndex"),h=F(o,Tr),f=F(o,Ca,qe),y=d.useMemo(()=>f?.filter(v=>v<p).length??0,[f,p]),b=f?.length??0;return d.useImperativeHandle(n,()=>i.current),!h||!f||b===0?a.jsx("div",{...kt(g,0,e),...r,children:a.jsx("div",{...wt(0,0,0,0),children:a.jsx(Pt,{CategoryHeader:c,Emoji:l,Row:u})})}):a.jsx("div",{...kt(g,h,e),...r,ref:s,children:a.jsxs("div",{...wt(h,b,p,y),children:[a.jsx(Pt,{CategoryHeader:c,Emoji:l,Row:u}),Array.from({length:m-p+1},(v,w)=>{let k=p+w,P=f.indexOf(k);return a.jsxs(d.Fragment,{children:[P>=0&&a.jsx("div",{style:{height:"var(--frimousse-category-header-height)"}}),a.jsx(Va,{Emoji:l,Row:u,rowIndex:k})]},k)}),Array.from({length:b},(v,w)=>a.jsx(za,{CategoryHeader:c,categoryIndex:w},w))]})})}),zr=d.forwardRef(({emoji:e,onClick:t,"aria-label":r="Change skin tone",...n},o)=>{let i=$(),s=F(i,Sa,qe),[c,l,u]=Dr(e),g=d.useMemo(()=>Math.max(0,u.findIndex(b=>b.skinTone===c)),[c,u]),p=u[g],m=u[(g+1)%u.length].skinTone,h=c==="none"?void 0:s?.[c],f=m==="none"?void 0:s?.[m],y=d.useCallback(b=>{t?.(b),b.isDefaultPrevented()||l(m)},[t,l,m]);return a.jsx("button",{type:"button",...n,"aria-label":r+(f?` (${f})`:""),"aria-live":"polite","aria-valuetext":h,"frimousse-skin-tone-selector":"",onClick:y,ref:o,children:p.emoji})});function Wr({children:e,...t}){let r=$();return F(r,ka)?a.jsx("span",{"frimousse-loading":"",...t,children:e}):null}function Ka({children:e}){let t=$(),r=F(t,ja);return e({search:r})}function Br({children:e,...t}){let r=$();return F(r,wa)?a.jsx("span",{"frimousse-empty":"",...t,children:typeof e=="function"?a.jsx(Ka,{children:e}):e}):null}function qr({children:e}){let t=Ir();return e({emoji:t})}function Kr({children:e,emoji:t}){let[r,n,o]=Dr(t);return e({skinTone:r,setSkinTone:n,skinToneVariations:o})}Hr.displayName="EmojiPicker.Root";Or.displayName="EmojiPicker.Search";Mr.displayName="EmojiPicker.Viewport";Vr.displayName="EmojiPicker.List";Wr.displayName="EmojiPicker.Loading";Br.displayName="EmojiPicker.Empty";zr.displayName="EmojiPicker.SkinToneSelector";qr.displayName="EmojiPicker.ActiveEmoji";Kr.displayName="EmojiPicker.SkinTone";function Ur({selectedEmoji:e,setSelectedEmoji:t}){const[r,n]=d.useState(!1);return a.jsxs(Xn,{open:r,onOpenChange:o=>n(o.open),children:[a.jsx(Qn,{asChild:!0,children:a.jsx(ae,{size:"xs",fontSize:"1rem",variant:"surface","aria-label":"Pick emoji",children:e||a.jsx(co,{})})}),a.jsx(Ht,{children:a.jsx(Jn,{children:a.jsxs(Zn,{width:"auto",className:"emojipicker",children:[a.jsx(eo,{}),a.jsx(to,{py:4,px:3,children:a.jsxs(Q.Root,{onEmojiSelect:o=>{t(o.emoji),n(!1)},children:[a.jsx(Q.Search,{}),a.jsxs(Q.Viewport,{style:{height:"326px"},children:[a.jsx(Q.Loading,{children:"Loadingâ€¦"}),a.jsx(Q.Empty,{children:"No emoji found."}),a.jsx(Q.List,{})]})]})})]})})})]})}function Ua({setIsEditing:e,id:t,label:r,icon:n}){const o=d.useRef(),{editHabit:i,removeHabit:s}=de(),[c,l]=d.useState(n);d.useEffect(()=>{o.current.focus()},[]);const u=()=>{o.current.value.trim().length===0?s(t):o.current&&(i(t,c,o.current.value),o.current.value="",e(p=>!p))},g=()=>{e(p=>!p),o.current.value=""};return a.jsx(J,{borderRadius:6,bg:"bg",width:"100%",position:"relative",borderWidth:2,borderColor:"teal",children:a.jsx("form",{onSubmit:p=>{p.preventDefault(),u()},children:a.jsxs(z,{direction:"row",alignItems:"center",px:3,children:[a.jsx(Ur,{selectedEmoji:c,setSelectedEmoji:l}),a.jsx(Ot,{required:!0,defaultValue:r,ref:o,py:4,px:0,placeholder:"Enter habit name",size:"lg",fontSize:{base:"1.125rem",md:"1.25rem"},fontWeight:500,height:"auto",border:0,outline:"transparent"}),a.jsx(ae,{type:"submit",size:"sm",colorPalette:"teal","aria-label":"Add habit",children:a.jsx(Mt,{})}),a.jsx(ae,{size:"sm",variant:"surface",colorPalette:"teal","aria-label":"Cancel Adding a habit",onClick:g,children:a.jsx(Nt,{})})]})})})}function Ga({children:e,setIsEditing:t,removeHabit:r,habitId:n}){return a.jsxs(gn,{children:[a.jsx(hn,{width:"full",children:e}),a.jsx(Ht,{children:a.jsx(mn,{children:a.jsxs(vn,{children:[a.jsx(Ke,{value:"edit-habit",onClick:()=>t(!0),children:"Edit"}),a.jsx(Ke,{value:"delete-habit",color:"fg.error",_hover:{bg:"bg.error",color:"fg.error"},onClick:()=>{r(n)},children:"Delete"})]})})})]})}const Ya=d.memo(function({id:t,index:r,label:n="Habit Name",icon:o="âœ¨",isCompleted:i=!1,toggleHabit:s,reorderHabit:c,removeHabit:l}){const u=d.useRef(),[g,p]=d.useState(),[m,h]=d.useState(),[f,y]=d.useState(!1);return d.useEffect(()=>{const b=u.current;if(b)return ra({element:b,onDragStart({source:v}){v.data={index:r,id:t},p(!0)},onDrop(){p(!1)}})},[r,t]),d.useEffect(()=>{const b=u.current;if(b)return ta({element:b,onDragEnter(){h(!0)},onDragLeave(){h(!1)},onDrop({source:v}){h(!1),p(!1);const w=v.data?.index,k=r;w!=null&&k!=null&&w!==k&&c(v.data?.id,w,k)},canDrop(){return!0}})},[r,c]),f?a.jsx(Ua,{setIsEditing:y,id:t,label:n,icon:o}):a.jsx(J,{gap:0,width:"100%",display:f?"none":"block",children:a.jsx(Ga,{setIsEditing:y,habitId:t,removeHabit:l,children:a.jsxs(J,{borderRadius:6,px:3,py:4,border:"0.5px solid",borderColor:"border",bg:"bg.subtle",width:"100%",position:"relative",_hover:{bg:"bg.emphasized",cursor:"pointer"},ref:u,opacity:g?.5:1,outline:m?"2px dashed":0,outlineColor:"teal.500",children:[a.jsx("span",{style:{position:"absolute",inset:0,zIndex:5},onClick:()=>{s(t)}}),a.jsxs(z,{flexDirection:"row",align:"flex-start",flex:"1",alignItems:"center",children:[a.jsx($t,{src:`https://emojicdn.elk.sh/${o}?style=facebook`,opacity:i?.5:1,height:{base:"1rem",md:"1.5rem"},width:{base:"1rem",md:"1.5rem"}}),a.jsxs(qn,{variant:"solid",colorPalette:"teal",checked:i,onCheckedChange:()=>{s(t)},width:"100%",justifyContent:"space-between",children:[a.jsx(Kn,{textDecoration:i?"line-through":"",fontSize:{base:"1.125rem",md:"1.25rem"},color:i?"fg.subtle":"",textAlign:"left",lineHeight:1.25,children:n}),a.jsx(Yn,{}),a.jsx(Gn,{})]})]})]})})})});function Xa({setIsAddingHabits:e}){const t=d.useRef(),[r,n]=d.useState(null),{addHabit:o}=de();d.useEffect(()=>{t.current.focus()},[]);const i=()=>{t.current.value.trim().length!==0&&t.current&&(o({icon:r??"âœ¨",title:t.current.value}),t.current.value="",e(c=>!c))},s=()=>{e(c=>!c),t.current.value=""};return a.jsx(J,{borderRadius:6,bg:"bg",width:"100%",position:"relative",borderWidth:2,borderColor:"teal",children:a.jsx("form",{onSubmit:c=>{c.preventDefault(),i()},children:a.jsxs(z,{direction:"row",alignItems:"center",px:3,children:[a.jsx(Ur,{selectedEmoji:r,setSelectedEmoji:n}),a.jsx(Ot,{required:!0,ref:t,py:4,px:0,placeholder:"Enter habit name",size:"lg",fontSize:{base:"1.125rem",md:"1.25rem"},fontWeight:500,height:"auto",border:0,outline:"transparent"}),a.jsx(ae,{type:"submit",size:"sm",colorPalette:"teal","aria-label":"Add habit",children:a.jsx(Mt,{})}),a.jsx(ae,{size:"sm",variant:"surface",colorPalette:"teal","aria-label":"Cancel Adding a habit",onClick:s,children:a.jsx(Nt,{})})]})})})}function Qa(){return a.jsx(J,{borderRadius:6,px:3,py:4,bg:"bg.subtle",width:"100%",position:"relative",outlineColor:"teal.500",children:a.jsxs(z,{gap:3,direction:"vertical",alignItems:"center",children:[a.jsx(yn,{size:"6"}),a.jsx(bn,{noOfLines:1})]})})}function Ja({isAddingHabits:e,handleBottomAddHabit:t}){return a.jsx(xn,{pt:16,pb:24,children:a.jsxs(jn,{children:[a.jsx(wn,{children:a.jsx(io,{})}),a.jsxs(ie,{textAlign:"center",children:[a.jsx(kn,{children:"Start adding habits"}),a.jsx(Pn,{children:"Add a new daily habit to get started."})]}),a.jsx(zn,{children:a.jsx(Lt,{size:"sm",onClick:t,disabled:e,colorPalette:"teal",children:"Create a Habit"})})]})})}function Za(){const[e,t]=d.useState(!1),{habits:r,isHabitLoading:n,toggleHabit:o,removeHabit:i,reorderHabit:s}=de(),c=r.length>0;function l(){t(h=>!h)}function u(){l(),window.scrollTo(0,0)}const g=Array.from({length:7},(h,f)=>a.jsx(Qa,{},f)),p=r.map((h,f)=>a.jsx(Ya,{index:f,id:h._id,icon:h.icon,label:h.title,toggleHabit:o,isCompleted:h.isCompleted,removeHabit:i,reorderHabit:s},h._id)),m=()=>n?g:c?p:a.jsx(Ja,{isAddingHabits:e,handleBottomAddHabit:u});return a.jsx(ue,{btnlinkprops:{onClick:l,disabled:e},title:"Habits",buttonText:"Add Habit",buttonIcon:a.jsx(Ye,{}),children:a.jsxs(z,{gap:6,children:[a.jsxs(ie,{gap:2,children:[e&&a.jsx(Xa,{setIsAddingHabits:t}),m()]}),a.jsx(ie,{display:r.length>0?"flex":"none",children:a.jsxs(Lt,{variant:"solid",colorPalette:"teal",width:"100%",onClick:u,disabled:e,children:[a.jsx(Ye,{})," Add a Habit"]})})]})})}function _a(){const{authFetch:e}=Ft(),[t,r]=d.useState([]),[n,o]=d.useState(!0),i=t.length>0;d.useEffect(()=>{e({url:"user/leaderboard"}).then(async u=>{const g=await u.json();r(g.slice(0,20)),o(!1)}).catch(u=>{o(!1),console.log(u)})},[e,r]);const s=Array.from({length:6},(u,g)=>a.jsx(Cn,{},g)),c=t.map((u,g)=>a.jsx(Sn,{rank:g+1,name:u.name,username:u.username,streak:u.streak.currentStreak},u._id)),l=()=>n?s:i?c:a.jsx(En,{});return a.jsx(ue,{title:"Leaderboard",linkText:"See more",link:"/leaderboard",children:a.jsx(ie,{gap:1,children:l()})})}function Ct(e,t){if(!e)throw new Error("useOncePerDay: A unique 'key' must be provided");const r=localStorage.getItem(e),n=Ee().toISOString();return!r||r!==n?(t(),localStorage.setItem(e,n),!0):(console.log("You've already ran this function for today."),!1)}function ei(){const{authFetch:e}=Ft(),{user:t,isUserLoading:r,userDispatch:n}=An(),{habits:o}=de(),i=t?.streak?.currentStreak>0,s=d.useMemo(()=>o.every(c=>c.isCompleted),[o]);return d.useEffect(()=>{async function c(){try{const l=await e({url:"user/increment-streak",method:"PATCH"}),u=await l.json();if(!l.ok)throw Error(u.message);n({type:"INCREMENT_STREAK"})}catch(l){throw Ge.create({title:`${l.message}`,type:"warning",closable:!0}),Error(l)}}s&&o.length>0&&Ct("#incrementStreak",()=>{c()})},[s,o.length]),d.useEffect(()=>{if(r)return;async function c(){try{const l=await e({url:"user/clear-streak",method:"PATCH"}),u=await l.json();if(!l.ok)throw Error(u.message);n({type:"CLEAR_STREAK"})}catch(l){throw Ge.create({title:`${l.message}`,type:"warning",closable:!0}),Error(l)}}Ct("#clearStreak",()=>{c()})},[r]),a.jsx(ue,{py:6,children:a.jsxs(z,{children:[a.jsx(Ue,{loading:r,children:a.jsxs(It,{gap:1,alignItems:"center",justifyContent:"center",children:[a.jsx(oe,{display:"inline-block",size:{base:"3xl",md:"5xl"},fontWeight:700,lineHeight:1,letterSpacing:1,children:t?.streak?.currentStreak}),a.jsx($t,{src:i?"https://emojicdn.elk.sh/ðŸ”¥?style=facebook":"https://emojicdn.elk.sh/ðŸŒ±?style=facebook",height:{base:"1.75rem",md:"2.75rem"}})]})}),a.jsx(Ue,{loading:r,children:a.jsxs(ie,{gap:0,children:[a.jsx(oe,{size:{base:"lg",md:"xl"},textAlign:"center",children:i?"Keep the streak alive!":"Start a streak!"}),a.jsx(Le,{color:"fg.muted",children:i?"Consistency is power.":"Consistency starts today."})]})})]})})}const ti=d.memo(ei);function ni(){const e=Tn({base:!1,lg:!0});return a.jsx(Rn,{children:a.jsxs(In,{gap:4,direction:{base:"column",md:"row"},children:[e?a.jsxs(z,{flex:1,display:{base:"none",lg:"flex"},minW:0,children:[a.jsx(po,{}),a.jsx(uo,{})]}):"",a.jsx(z,{flex:2,minW:0,children:a.jsx(Za,{})}),e?a.jsxs(z,{flex:1,display:{base:"none",lg:"flex"},minW:0,children:[a.jsx(ti,{}),a.jsx(_a,{})]}):""]})})}export{ni as default};
